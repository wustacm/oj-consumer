version: "3"
services:
  ddl-judge-dev:
    command: celery -A tasks worker -l info -Q judge
    volumes:
      - ~/data/ddl-backend/test_cases:/judge/test_cases
    image: 4ddl/ddlcw
    build:
      context: .
      dockerfile: Dockerfile
    container_name: ddl-judge-dev
    restart: always
    environment:
      - BACKEND_HOST=127.0.0.1
      - BACKEND_PROTOCOL=http
      - BACKEND_PORT=80
      - RABBITMQ_HOST=127.0.0.1
      - RABBITMQ_PORT=5672
      - RABBITMQ_USER=guest
      - RABBITMQ_PASS=guest
      - DDLCW_DEBUG=True
      - DDLCW_SYNC_ENABLE=False